<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MongoDB Atlas Integration - Data Flow</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 40px 20px; }
        .card { background: white; border-radius: 12px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
        .flow-arrow { display: flex; align-items: center; justify-content: center; color: #667eea; font-weight: bold; font-size: 24px; }
    </style>
</head>
<body>
    <div class="max-w-6xl mx-auto">
        <!-- Header -->
        <div class="card p-8 mb-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-2">ðŸ—„ï¸ MongoDB Atlas Integration</h1>
            <p class="text-gray-600 text-lg">Data flow from browser to MongoDB cloud database</p>
        </div>

        <!-- Architecture Diagram -->
        <div class="card p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">System Architecture</h2>
            
            <div class="space-y-6">
                <!-- Frontend Layer -->
                <div>
                    <p class="text-sm font-bold text-gray-600 mb-3">FRONTEND (Browser)</p>
                    <div class="grid grid-cols-3 gap-4 mb-4">
                        <div class="bg-blue-50 p-4 rounded-lg border-2 border-blue-300 text-center">
                            <p class="font-bold text-blue-900">ðŸ“„ HTML Files</p>
                            <p class="text-xs text-blue-700 mt-1">booking_request.html</p>
                            <p class="text-xs text-blue-700">new_signups.html</p>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg border-2 border-purple-300 text-center">
                            <p class="font-bold text-purple-900">ðŸ’¾ localStorage</p>
                            <p class="text-xs text-purple-700 mt-1">roomhy_booking_requests</p>
                            <p class="text-xs text-purple-700">roomhy_kyc_verification</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg border-2 border-green-300 text-center">
                            <p class="font-bold text-green-900">ðŸ”„ Sync Tool</p>
                            <p class="text-xs text-green-700 mt-1">sync-to-mongodb.html</p>
                        </div>
                    </div>
                </div>

                <div class="flow-arrow">â†“</div>

                <!-- API Layer -->
                <div>
                    <p class="text-sm font-bold text-gray-600 mb-3">API LAYER (Node.js/Express)</p>
                    <div class="bg-gradient-to-r from-orange-50 to-red-50 p-6 rounded-lg border-2 border-orange-300">
                        <p class="font-bold text-orange-900 mb-3">REST API Endpoints</p>
                        <div class="grid grid-cols-2 gap-3 text-sm">
                            <div class="bg-white p-2 rounded border border-orange-200">
                                <code class="text-xs text-orange-700">POST /api/data/booking-requests/sync</code>
                            </div>
                            <div class="bg-white p-2 rounded border border-orange-200">
                                <code class="text-xs text-orange-700">GET /api/data/booking-requests</code>
                            </div>
                            <div class="bg-white p-2 rounded border border-orange-200">
                                <code class="text-xs text-orange-700">POST /api/data/kyc-verifications/sync</code>
                            </div>
                            <div class="bg-white p-2 rounded border border-orange-200">
                                <code class="text-xs text-orange-700">GET /api/data/kyc-verifications</code>
                            </div>
                            <div class="bg-white p-2 rounded border border-orange-200">
                                <code class="text-xs text-orange-700">POST /api/data/sync-all</code>
                            </div>
                            <div class="bg-white p-2 rounded border border-orange-200">
                                <code class="text-xs text-orange-700">File: dataSync.js</code>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flow-arrow">â†“</div>

                <!-- Database Layer -->
                <div>
                    <p class="text-sm font-bold text-gray-600 mb-3">DATABASE LAYER (MongoDB)</p>
                    <div class="grid grid-cols-2 gap-4">
                        <div class="bg-green-50 p-4 rounded-lg border-2 border-green-300">
                            <p class="font-bold text-green-900">ðŸ“¦ Collections</p>
                            <p class="text-sm text-green-700 mt-2">bookingrequests</p>
                            <p class="text-xs text-gray-600">20 fields per document</p>
                            <p class="text-xs text-gray-600">Indexed by: property_id, user_id, area</p>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg border-2 border-green-300">
                            <p class="font-bold text-green-900">ðŸ‘¥ Collections</p>
                            <p class="text-sm text-green-700 mt-2">kycverifications</p>
                            <p class="text-xs text-gray-600">User signup records</p>
                            <p class="text-xs text-gray-600">Indexed by: email, phone, area</p>
                        </div>
                    </div>
                </div>

                <div class="flow-arrow">â†“</div>

                <!-- Cloud Storage -->
                <div class="bg-gradient-to-r from-indigo-50 to-purple-50 p-6 rounded-lg border-2 border-purple-300 text-center">
                    <p class="text-xl font-bold text-purple-900 mb-2">â˜ï¸ MongoDB Atlas Cloud</p>
                    <p class="text-sm text-purple-700">Secure, Scalable, Global</p>
                    <p class="text-xs text-gray-600 mt-2">Connection: mongodb+srv://roomhy_user@cluster.mongodb.net/roomhy</p>
                </div>
            </div>
        </div>

        <!-- Data Flow Diagram -->
        <div class="card p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Data Sync Flow</h2>
            
            <div class="space-y-4">
                <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg border border-blue-200">
                    <span class="text-2xl">1ï¸âƒ£</span>
                    <div class="flex-1">
                        <p class="font-bold text-blue-900">User Generates Test Data</p>
                        <p class="text-sm text-blue-700">Opens test-booking-data.html â†’ Creates sample records â†’ Stored in localStorage</p>
                    </div>
                </div>

                <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg border border-purple-200">
                    <span class="text-2xl">2ï¸âƒ£</span>
                    <div class="flex-1">
                        <p class="font-bold text-purple-900">Open Sync Tool</p>
                        <p class="text-sm text-purple-700">Opens sync-to-mongodb.html â†’ Reads localStorage data</p>
                    </div>
                </div>

                <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-green-50 to-green-100 rounded-lg border border-green-200">
                    <span class="text-2xl">3ï¸âƒ£</span>
                    <div class="flex-1">
                        <p class="font-bold text-green-900">Click Sync Button</p>
                        <p class="text-sm text-green-700">Sends data via API â†’ Node.js server receives request</p>
                    </div>
                </div>

                <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-orange-50 to-orange-100 rounded-lg border border-orange-200">
                    <span class="text-2xl">4ï¸âƒ£</span>
                    <div class="flex-1">
                        <p class="font-bold text-orange-900">Server Processes Data</p>
                        <p class="text-sm text-orange-700">Validates â†’ Transforms â†’ Prepares for MongoDB</p>
                    </div>
                </div>

                <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-red-50 to-red-100 rounded-lg border border-red-200">
                    <span class="text-2xl">5ï¸âƒ£</span>
                    <div class="flex-1">
                        <p class="font-bold text-red-900">Save to MongoDB</p>
                        <p class="text-sm text-red-700">Documents saved to MongoDB Atlas â†’ Data persists in cloud</p>
                    </div>
                </div>

                <div class="flex items-center gap-4 p-4 bg-gradient-to-r from-indigo-50 to-indigo-100 rounded-lg border border-indigo-200">
                    <span class="text-2xl">✅</span>
                    <div class="flex-1">
                        <p class="font-bold text-indigo-900">Success!</p>
                        <p class="text-sm text-indigo-700">Sync tool shows success message â†’ Data accessible via API â†’ Ready to use!</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Collections Schema -->
        <div class="card p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Database Schema</h2>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- BookingRequest Schema -->
                <div>
                    <h3 class="font-bold text-blue-900 bg-blue-50 p-3 rounded-t-lg mb-0">ðŸ“¦ bookingrequests Collection</h3>
                    <div class="bg-white p-4 rounded-b-lg border border-blue-200 font-mono text-xs space-y-1">
                        <div><span class="text-blue-600">_id</span>: ObjectId</div>
                        <div><span class="text-blue-600">property_id</span>: String (indexed)</div>
                        <div><span class="text-blue-600">property_name</span>: String</div>
                        <div><span class="text-blue-600">area</span>: String (indexed)</div>
                        <div><span class="text-blue-600">property_type</span>: String</div>
                        <div><span class="text-blue-600">rent_amount</span>: Number</div>
                        <div><span class="text-blue-600">user_id</span>: String (indexed)</div>
                        <div><span class="text-blue-600">name</span>: String</div>
                        <div><span class="text-blue-600">phone</span>: String</div>
                        <div><span class="text-blue-600">email</span>: String</div>
                        <div><span class="text-blue-600">status</span>: "pending|confirmed|rejected|booked"</div>
                        <div><span class="text-blue-600">visit_date</span>: Date</div>
                        <div><span class="text-blue-600">created_at</span>: Date</div>
                        <div><span class="text-blue-600">updated_at</span>: Date</div>
                    </div>
                </div>

                <!-- KYCVerification Schema -->
                <div>
                    <h3 class="font-bold text-green-900 bg-green-50 p-3 rounded-t-lg mb-0">ðŸ‘¥ kycverifications Collection</h3>
                    <div class="bg-white p-4 rounded-b-lg border border-green-200 font-mono text-xs space-y-1">
                        <div><span class="text-green-600">_id</span>: ObjectId</div>
                        <div><span class="text-green-600">id</span>: String (unique, indexed)</div>
                        <div><span class="text-green-600">firstName</span>: String</div>
                        <div><span class="text-green-600">lastName</span>: String</div>
                        <div><span class="text-green-600">email</span>: String (unique, indexed)</div>
                        <div><span class="text-green-600">phone</span>: String (indexed)</div>
                        <div><span class="text-green-600">password</span>: String (hashed)</div>
                        <div><span class="text-green-600">role</span>: "propertyowner|tenant|admin"</div>
                        <div><span class="text-green-600">kycStatus</span>: "pending|verified|rejected"</div>
                        <div><span class="text-green-600">status</span>: "active|inactive|blocked"</div>
                        <div><span class="text-green-600">area</span>: String (indexed)</div>
                        <div><span class="text-green-600">createdAt</span>: Date</div>
                        <div><span class="text-green-600">updatedAt</span>: Date</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Setup Steps -->
        <div class="card p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Setup Checklist</h2>
            
            <div class="space-y-3">
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                    <input type="checkbox" class="w-5 h-5 text-blue-600 rounded">
                    <span class="text-gray-700">Create MongoDB Atlas account (mongodb.com/cloud/atlas)</span>
                </label>
                
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                    <input type="checkbox" class="w-5 h-5 text-blue-600 rounded">
                    <span class="text-gray-700">Create M0 Free Cluster</span>
                </label>
                
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                    <input type="checkbox" class="w-5 h-5 text-blue-600 rounded">
                    <span class="text-gray-700">Create database user (roomhy_user)</span>
                </label>
                
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                    <input type="checkbox" class="w-5 h-5 text-blue-600 rounded">
                    <span class="text-gray-700">Allow network access (IP whitelist)</span>
                </label>
                
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                    <input type="checkbox" class="w-5 h-5 text-blue-600 rounded">
                    <span class="text-gray-700">Copy connection string</span>
                </label>
                
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                    <input type="checkbox" class="w-5 h-5 text-blue-600 rounded">
                    <span class="text-gray-700">Add MONGO_URI to .env file</span>
                </label>
                
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                    <input type="checkbox" class="w-5 h-5 text-blue-600 rounded">
                    <span class="text-gray-700">Restart server (npm run dev)</span>
                </label>
                
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                    <input type="checkbox" class="w-5 h-5 text-blue-600 rounded">
                    <span class="text-gray-700">Open sync-to-mongodb.html</span>
                </label>
                
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                    <input type="checkbox" class="w-5 h-5 text-blue-600 rounded">
                    <span class="text-gray-700">Click "Sync Everything" button</span>
                </label>
                
                <label class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100">
                    <input type="checkbox" class="w-5 h-5 text-blue-600 rounded">
                    <span class="text-gray-700">Verify data in MongoDB Atlas Collections</span>
                </label>
            </div>
        </div>

        <!-- Files Reference -->
        <div class="card p-8 mb-8">
            <h2 class="text-2xl font-bold text-gray-900 mb-6">Files Reference</h2>
            
            <div class="space-y-4">
                <div class="p-4 bg-blue-50 rounded-lg border border-blue-200">
                    <p class="font-bold text-blue-900">ðŸ“„ Backend Files</p>
                    <div class="text-sm text-blue-700 mt-2 space-y-1">
                        <p>"¢ <code>roomhy-backend/models/KYCVerification.js</code> - User signup model</p>
                        <p>"¢ <code>roomhy-backend/models/BookingRequest.js</code> - Booking request model</p>
                        <p>"¢ <code>roomhy-backend/routes/dataSync.js</code> - All API endpoints</p>
                        <p>"¢ <code>server.js</code> - Route registration</p>
                    </div>
                </div>

                <div class="p-4 bg-purple-50 rounded-lg border border-purple-200">
                    <p class="font-bold text-purple-900">ðŸ”§ Frontend Files</p>
                    <div class="text-sm text-purple-700 mt-2 space-y-1">
                        <p>"¢ <code>Areamanager/sync-to-mongodb.html</code> - Sync tool UI</p>
                        <p>"¢ <code>Areamanager/test-booking-data.html</code> - Test data generator</p>
                        <p>"¢ <code>superadmin/new_signups.html</code> - User signup table</p>
                        <p>"¢ <code>Areamanager/booking_request.html</code> - Booking requests table</p>
                    </div>
                </div>

                <div class="p-4 bg-green-50 rounded-lg border border-green-200">
                    <p class="font-bold text-green-900">ðŸ“š Documentation</p>
                    <div class="text-sm text-green-700 mt-2 space-y-1">
                        <p>"¢ <code>MONGODB_ATLAS_SETUP.md</code> - Complete setup guide</p>
                        <p>"¢ <code>MONGODB_QUICK_SETUP.md</code> - Quick reference</p>
                        <p>"¢ <code>mongodb-integration-visual.html</code> - This file</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status -->
        <div class="card p-8 text-center">
            <h2 class="text-2xl font-bold text-green-600 mb-2">✅ MongoDB Atlas Integration Ready!</h2>
            <p class="text-gray-600 mb-4">Your data is ready to be synced to MongoDB Atlas cloud database</p>
            <a href="sync-to-mongodb.html" class="inline-block bg-purple-600 text-white px-6 py-3 rounded-lg hover:bg-purple-700 font-bold">
                â†’ Open Sync Tool
            </a>
        </div>
    </div>
</body>
</html>
